
<!DOCTYPE html>
<html lang="Chinese &amp; English" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RubyLiu&#39;s Blog</title>

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    
    <meta name="description" content="The site is used for technology accumulation and precipitation,目标：利用自制的命令行实现输出自己的简历；增加常用的命令：ls、 ls -a、打开当前目录
怎么制作命令行1、配置基础框架2、新建bin/qqResume.js目录，并如下:123456789101,"> 
    <meta name="author" content="Ruby Liu"> 
    <link rel="alternative" href="atom.xml" title="RubyLiu&#39;s Blog" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <link rel="stylesheet" href="/css/diaspora.css">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-8691406134231910",
        enable_page_level_ads: true
      });
    </script>

</head>

<body class="loading">
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">git commit 规范</h3>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">git commit 规范</h1>
        <div class="stuff">
            <span>七月 19, 2018</span>
            
  <ul class="post-tags-list"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/git/">git</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/代码规范/">代码规范</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/工作流/">工作流</a></li></ul>


        </div>
        <div class="content markdown">
            <p>&emsp;&emsp;前段时间组内规范了工作流，设定了commit message 规范，开始时甚是痛苦，但是习惯了发现好处颇多。现在社区中有很多 Commit message的写法规范，个人认为 <strong>Angular 规范</strong> 是目前使用最广的写法。</p>
<h3 id="commit-message-的作用"><a href="#commit-message-的作用" class="headerlink" title="commit message 的作用"></a>commit message 的作用</h3><ul>
<li>提供更多的历史信息，方便快速浏览。</li>
<li>可以过滤某些commit（比如文档改动），便于快速查找信息。</li>
<li>可以直接从commit生成<code>Change log</code>。</li>
<li>可读性好，清晰，不必深入看代码即可了解当前commit的作用。</li>
<li>为 Code Reviewing做准备</li>
<li>方便跟踪工程历史</li>
<li>让其他的开发者在运行 git blame 的时候想跪谢</li>
<li>提高项目的整体质量，提高个人工程素质</li>
</ul>
<hr>
<h3 id="commit-message-的格式"><a href="#commit-message-的格式" class="headerlink" title="commit message 的格式"></a>commit message 的格式</h3><p>&emsp;&emsp;Commit message 包括三个部分：header(必需)、body(可省)和footer(可省).<br>任何一行都不得超过72个字符（或100个字符），这是为了避免自动换行影响美观。</p>
<h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p>Header 部分只有一行，包括三个字段 <code>type</code>（必需）、<code>scope</code>（可选）和<code>subject</code>（必需）。</p>
<blockquote>
<p><strong> type ：用于说明 commit 的类别，只允许使用下面7个标识。</strong></p>
<ul>
<li>feat：新功能（feature）</li>
<li>fix：修补bug</li>
<li>docs：文档（documentation）</li>
<li>style： 格式（不影响代码运行的变动）</li>
<li>refactor：重构（即不是新增功能，也不是修改bug的代码变动）</li>
<li>test：增加测试</li>
<li>chore：构建过程或辅助工具的变动</li>
</ul>
</blockquote>
<p>一般情况下，type为feat和fix，则该 commit 将肯定出现在 Change log 之中，其他的自己可以设置。</p>
<blockquote>
<p><strong> scope: 用于说明 commit 影响的范围，比如数据层、控制层、视图层等等。</strong><br>例如在Angular，可以是<code>$location</code>, <code>$browser</code>, <code>$compile</code>, <code>$rootScope</code>, <code>ngHref</code>, <code>ngClick</code>, <code>ngView</code>等。</p>
</blockquote>
<blockquote>
<p><strong> subject: 是 commit 目的的简短描述，开头需要使用第一人称现在时的动词开头。</strong></p>
</blockquote>
<h4 id="Body"><a href="#Body" class="headerlink" title="Body"></a>Body</h4><p>Body 部分是对本次 commit 的详细描述，可以分成多行<br>1、使用第一人称现在时，比如使用change而不是changed或changes。<br>2、永远别忘了第2行是空行。<br>3、应该说明代码变动的动机，以及与以前行为的对比。</p>
<h4 id="Footer"><a href="#Footer" class="headerlink" title="Footer"></a>Footer</h4><p>Footer 部分只用于以下两种情况：<br>1、不兼容变动<br>&emsp;&emsp;&emsp;&emsp;若当前代码与上一个版本不兼容，则 Footer 部分以BREAKING CHANGE开头，后面是对变动的描述、以及变动理由和迁移方法。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">BREAKING CHANGE: isolate scope bindings definition has changed.</span><br><span class="line">  To migrate the code follow the example below:</span><br><span class="line"></span><br><span class="line">  Before:</span><br><span class="line">  scope: &#123;</span><br><span class="line">    myAttr: <span class="string">'attribute'</span>,</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  After:</span><br><span class="line">  scope: &#123;</span><br><span class="line">    myAttr: <span class="string">'@'</span>,</span><br><span class="line">  &#125;</span><br><span class="line">The removed <span class="string">`inject`</span> wasn<span class="string">'t generaly useful for directives so there should be no code using it.</span></span><br></pre></td></tr></table></figure></p>
<p>2、关闭issue<br>&emsp;&emsp;&emsp;&emsp;若当前 commit 针对某个issue，那么可以在 Footer 部分关闭这个 issue 。<br><code>Closes #234</code></p>
<hr>
<h3 id="补充-Revrt"><a href="#补充-Revrt" class="headerlink" title="补充 Revrt"></a>补充 Revrt</h3><p>若当前 commit 用于撤销以前的 commit，则必须以revert:开头，后面跟着被撤销 Commit 的 Header。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">revert: feat(pencil): add &apos;graphiteWidth&apos; option</span><br><span class="line">This reverts commit 667ecc1654a317a13331b17617d973392f415f02.</span><br></pre></td></tr></table></figure></p>
<p>Body部分的格式是固定的，必须写成<code>This reverts commit &amp;lt;hash&gt;</code>，其中的hash是被撤销 commit 的 SHA 标识符。<br>若当前 commit 与被撤销的 commit，在同一个发布（release）里面，那么它们都不会出现在 Change log 里面。如果两者在不同的发布，那么当前 commit，会出现在 Change log 的Reverts小标题下面。</p>
<hr>
<h3 id="Commitizen"><a href="#Commitizen" class="headerlink" title="Commitizen"></a>Commitizen</h3><p>可以使用典型的git工作流程或通过使用CLI向导Commitizen来添加提交消息格式。</p>
<p><strong> 安装 </strong> <code>npm i -g commitizen</code><br>然后，在项目目录里，运行下面的命令，使其支持 Angular 的 Commit message 格式。<br><code>commitizen init cz-conventional-changelog --save --save-exact</code><br>以后，凡是用到git commit命令，一律改为使用git cz。这时，就会出现选项，用来生成符合格式的 Commit message。</p>
<p><img src="https://raw.githubusercontent.com/commitizen/cz-cli/master/meta/screenshots/add-commit.png" alt="git commit"></p>
<hr>
<h3 id="validate-commit-msg"><a href="#validate-commit-msg" class="headerlink" title="validate-commit-msg"></a>validate-commit-msg</h3><p>validate-commit-msg 用于检查项目的 Commit message 是否符合Angular规范。<br>该包提供了使用githooks来校验commit message的一些二进制文件。推荐使用husky，只需要添加 “commitmsg”: “validate-commit-msg” 到package.json中的nam scripts即可.</p>
<p>当然，还可以通过定义配置文件.vcmrc来自定义校验格式。详细使用请见文档 <a href="https://github.com/conventional-changelog-archived-repos/validate-commit-msg" target="_blank" rel="noopener">validate-commit-msg</a></p>
<hr>
<h3 id="生成Change-log"><a href="#生成Change-log" class="headerlink" title="生成Change log"></a>生成Change log</h3><p>如果commit都符合规则，则发布新版本时，Change log 就可以用脚本自动生成。<br>生成的文档主要包括：New feature、Bug fixed、Breaking changes。<br>每个部分都会罗列相关的 commit ，并且有指向这些 commit 的链接。</p>
<p><img src="https://sfault-image.b0.upaiyun.com/268/595/2685952301-58eee4f6f1747" alt="change log"></p>
<p><a href="https://github.com/conventional-changelog/conventional-changelog" target="_blank" rel="noopener">conventional-changelog</a> 就是生成 Change log 的工具，运行下面的命令即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g conventional-changelog</span><br><span class="line">$ cd my-project</span><br><span class="line">$ conventional-changelog -p angular -i CHANGELOG.md -w</span><br></pre></td></tr></table></figure></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        <li title='0' data-url='http://link.hhtjim.com/163/5146554.mp3'></li>
                    
                        <li title='1' data-url='http://link.hhtjim.com/qq/001faIUs4M2zna.mp3'></li>
                    
                </ul>
            
        </div>
        <!-- 
    <div id='gitalk-container' class="comment link">查看评论</div>
 -->

    </div>
    
</div>


    </div>
</div>

</body>
<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>
<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">
<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>

<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
